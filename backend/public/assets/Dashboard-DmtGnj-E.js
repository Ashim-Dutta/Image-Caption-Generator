import{r,u as k,j as e}from"./index-DKhwdl1v.js";import{a as f}from"./index-NIGUFBhG.js";function D(){const[i,d]=r.useState(null),[c,x]=r.useState(null),[a,m]=r.useState(""),[p,u]=r.useState(!1),[h,l]=r.useState(!1),s=r.useRef(null),v=k(),g=t=>{if(t&&t.type.startsWith("image/")){d(t);const n=new FileReader;n.onload=y=>x(y.target.result),n.readAsDataURL(t)}},o=t=>{t.preventDefault(),t.stopPropagation(),t.type==="dragenter"||t.type==="dragover"?l(!0):t.type==="dragleave"&&l(!1)},j=t=>{t.preventDefault(),t.stopPropagation(),l(!1),t.dataTransfer.files&&t.dataTransfer.files[0]&&g(t.dataTransfer.files[0])},N=async()=>{if(i){u(!0);try{const t=new FormData;t.append("image",i),t.append("caption",a);const n=await f.post("https://image-caption-generator-yjzl.onrender.com/api/posts",t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});m(n.data.post.caption)}catch(t){console.log("Something went wrong........",t)}finally{u(!1)}}},b=()=>{d(null),x(null),m(""),s.current&&(s.current.value="")},w=async()=>{try{await f.post("https://image-caption-generator-yjzl.onrender.com/api/auth/logout",{},{withCredentials:!0}),v("/")}catch(t){console.error("Logout failed:",t)}};return e.jsxs("div",{className:"min-h-screen bg-black relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900/20 to-slate-900",children:e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-blue-500/20 via-transparent to-transparent"})}),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#1f2937_1px,transparent_1px),linear-gradient(to_bottom,#1f2937_1px,transparent_1px)] bg-[size:40px_40px] opacity-20"}),e.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col items-center justify-center p-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("button",{onClick:w,className:`\r
              bg-red-600 text-white font-medium py-2 px-5 rounded-lg\r
              shadow-md hover:bg-red-700 hover:shadow-lg\r
              transition-colors duration-200 ease-in-out\r
              absolute z-50 right-[2.5rem]\r
              cursor-pointer\r
            `,children:"Logout"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-4",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"Vision Analysis"})}),e.jsx("p",{className:"text-slate-400 text-lg",children:"Upload an image to generate intelligent captions"})]}),e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-3xl p-8 w-full max-w-2xl shadow-2xl",children:[c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:c,alt:"Preview",className:"w-full h-64 object-cover rounded-xl border border-slate-600"}),e.jsx("button",{onClick:b,className:"absolute top-3 right-3 w-8 h-8 bg-red-500/80 hover:bg-red-500 rounded-full flex items-center justify-center text-white transition-all",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:N,disabled:p,className:`cursor-pointer flex-1\r
                    bg-gradient-to-r from-blue-600 to-cyan-600\r
                    hover:from-blue-700 hover:to-cyan-700\r
                    disabled:from-slate-600 disabled:to-slate-600\r
                    px-6 py-3 rounded-xl font-semibold text-white\r
                    transition-all duration-200 ease-in-out\r
                    disabled:cursor-not-allowed\r
                    flex items-center justify-center gap-2\r
                    active:scale-95\r
                  `,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{className:"animate-pulse",children:"Analyzing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Generate Caption"]})}),e.jsx("button",{onClick:b,className:`cursor-pointer px-6 py-3 border border-slate-600\r
                    rounded-xl font-semibold text-slate-300\r
                    hover:bg-slate-800 hover:border-slate-500\r
                    transition-all duration-200 ease-in-out\r
                    active:scale-95 flex items-center justify-center gap-2\r
                  `,children:"Reset"})]})]}):e.jsxs("div",{className:`relative border-2 border-dashed rounded-2xl p-12 text-center transition-all duration-300 cursor-pointer group ${h?"border-blue-400 bg-blue-500/10":"border-slate-600 hover:border-slate-500 hover:bg-slate-800/30"}`,onDragEnter:o,onDragLeave:o,onDragOver:o,onDrop:j,onClick:()=>s.current?.click(),children:[e.jsx("input",{ref:s,type:"file",accept:"image/*",onChange:t=>g(t.target.files[0]),className:"hidden"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:h?"Drop your image here":"Upload Image"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Drag and drop your image here, or click to browse"}),e.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Supports JPG, PNG, WebP up to 10MB"})]})]})]}),a&&e.jsx("div",{className:"mt-8 p-6 bg-gradient-to-r from-blue-900/30 to-purple-900/30 rounded-xl border border-blue-500/30 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"Generated Caption"}),e.jsx("p",{className:"text-slate-200 leading-relaxed",children:a}),e.jsx("div",{className:"flex gap-2 mt-4",children:e.jsxs("button",{onClick:()=>navigator.clipboard?.writeText(a),className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm text-slate-300 transition-colors flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]})})]}),e.jsxs("div",{className:"mt-8 flex justify-center items-center gap-6 text-slate-500 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Vision AI Ready"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse delay-300"}),e.jsx("span",{children:"Secure Processing"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse delay-700"}),e.jsx("span",{children:"Multi-language Support"})]})]})]})]})}export{D as default};
